import { expect } from "chai";
import { deployments, ethers, getNamedAccounts} from "hardhat";
import "hardhat-deploy-ethers";


describe("GatekeeperTwo", async () =>{

  it("Should execute exploit", async () =>{
    await deployments.fixture(["GatekeeperTwo","GatekeeperTwoExploit"])
    const {exploiter}= await getNamedAccounts()
    //const exploiterAcc= await ethers.getSigner(exploiter)
    const gatekeeperTwoDeployment=await deployments.get('GatekeeperTwo')
    //const gatekeeperTwoExploitDeployment=await deployments.get('GatekeeperTwoExploit')
    const gatekeeperTwo = await ethers.getContractAt('GatekeeperTwo',gatekeeperTwoDeployment.address)
    //const gatekeeperTwoExploit = await ethers.getContractAt('GatekeeperTwoExploit',gatekeeperTwoExploitDeployment.address)
    
    expect(await gatekeeperTwo.entrant(),"Exploiter couldn't pass through gate one").to.be.equal(exploiter)
    
  });
});
