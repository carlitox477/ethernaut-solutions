import "@ethersproject/abstract-provider"
import { deployments, ethers, getNamedAccounts, network } from "hardhat"


import * as dotenv from 'dotenv'
dotenv.config()


const executeExploit= async()=>{
    if(network.name==="rinkeby"){
        const {exploiter}= await getNamedAccounts()
        const exploiterAcc= await ethers.getSigner(exploiter)
        const detectionBotDeployment=await deployments.get('DetectionBot')
        const detectionBot = await ethers.getContractAt('DetectionBot',detectionBotDeployment.address)
        const forta = await ethers.getContractAt('Forta',process.env.FORTA_ADDRESS as string)
        //const dexTwo=await ethers.getContractAt('DexTwo',process.env.DEX_TWO_ADDRESS as string)

        const detectionSetTx=await forta.connect(exploiterAcc).setDetectionBot(detectionBot.address,{gasLimit:80000})
        
        
    }else{
        console.log("This script can only be executed in rinkeby network")
    }
}

executeExploit().then(()=>process.exit(0)).catch(err=>console.log(err))
